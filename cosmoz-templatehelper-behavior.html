<link rel="import" href="../polymer/polymer.html">

<script type="text/javascript">
	(function () {
		'use strict';
		window.Cosmoz = window.Cosmoz || {};

		/**
		 * Behavior with various evaluation and formatting functions.
		 *
		 * @polymerBehavior Cosmoz.TemplateHelperBehavior
		 * @demo
		 */
		Cosmoz.TemplateHelperBehavior = {
			/**
			 * Math.abs
			 */
			abs: Math.abs,

			/**
			 * Check if any of the arguments are true.
			 * @return {Boolean} Whether any of the function arguments are true or not.
			 */
			anyTrue() {
				const argumentArray = Array.prototype.slice.call(arguments);
				return argumentArray.some(arg => !!arg);
			},

			/**
			 * Concatenate all arguments to a string.
			 * @return {String} Concatenated arguments.
			 */
			concat() {
				return Array.prototype.join.call(arguments, '');
			},

			/**
			 * If iftrue argument is true, return result argument, otherwise return elseresult argument.
			 * @param {Boolean} iftrue Codition for result
			 * @param  {*} result Result when iftrue is true.
			 * @param {*} elseresult Result when iftrue is false.
			 * @return {Boolean} result or elseresult depending on iftrue evaluation.
			 */
			ifElse(iftrue, result, elseresult) {
				return iftrue ? result : elseresult;
			},

			/**
			 * Check if item argument exists in array argument.
			 * @param {*} item Item to search for in the array.
			 * @param {Array} array Array to search.
			 * @return {Boolean} Whether the item was found in array or not.
			 */
			inArray(item, array) {
				return array.indexOf(item) > -1;
			},

			/**
			 * Check equality of the arguments.
			 * @param {*} arg1 First argument to compare.
			 * @param {*} arg2 Second argument to compare
			 * @return {Boolean} Whether the first and second arguments are equal or not.
			 */
			isEqual(arg1, arg2) {
				return arg1 === arg2;
			},

			/**
			 * Check if argument is undefined, null, empty Array list,
			 * empty String or 0 number (like length).
			 * @param  {Object}  obj Argument to evaluate.
			 * @return {Boolean}  Whether the argument is empty or not.
			 */
			isEmpty(obj) {
				if (obj === undefined || obj === null) {
					return true;
				}
				if (obj instanceof Array && obj.length === 0) {
					return true;
				}
				const objType = typeof obj;
				if (objType === 'string' && obj.length === 0) {
					return true;
				}
				if (objType === 'number' && obj === 0) {
					return true;
				}
				return false;
			},

			/**
			 * Formats a number using fixed-point notation.
			 * @param {Number} number Number with decimals to be formatted.
			 * @param {Number} fixval Number of decimals to use.
			 * @return {String} The number converted to string keep only fixval number of decimals, if number empty, returns empty string
			 */
			toFixed(number, fixval) {
				if (typeof number !== 'number') {
					return '';
				}
				return number.toFixed(fixval);
			}
		};
	}());
</script>
